<link
	rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/>

{% extends "templates/web.html" %} {% block page_content %}
<a href="/events"> &lt; Kembali ke List Event</a>
<div class="py-5 row">
	<div class="col-sm-4">
		<img
			alt="{{ event_name }}"
			src="{{ doc.event_poster }}"
			class="img-fluid"
			style="width: 100%; border-radius: 10px"
		/>
	</div>
	<div class="col-sm-7">
		<div class="d-flex justify-content-start align-items-center">
			<div>
				<h4 class="mb-2">{{ event_name }}</h4>
				<div class="d-flex align-items-center mt-6 mb-2">
					<i class="fa fa-calendar mr-2"></i>
					{% set days_in_indo = { 'Monday': 'Senin', 'Tuesday': 'Selasa', 'Wednesday':
					'Rabu', 'Thursday': 'Kamis', 'Friday': 'Jumat', 'Saturday': 'Sabtu', 'Sunday':
					'Minggu' } %} {% set english_day = doc.date.strftime('%A') %} {% set indo_day =
					days_in_indo[english_day] %} {% set formatted_date =
					doc.date.strftime('%d-%m-%Y') %}
					<p class="mb-0">{{ indo_day }}, {{ formatted_date }}</p>
				</div>
			</div>
			<div class="ml-auto">
				{%- if category == 'Gratis' -%}
				<a
					name=""
					id="register"
					class="btn btn-success px-5 py-2 font-weight-bold"
					href=""
					role="button"
					>Daftar Gratis</a
				>
				{%- elif category == 'Berbayar' -%}
				<a
					name=""
					id="register"
					class="btn btn-info px-5 py-2 font-weight-bold"
					href="/join-event"
					role="button"
					>Daftar - Rp. {{ "{:,.0f}".format(price).replace(",", ".") }}</a
				>
				{%- endif -%}
			</div>
		</div>
		<div class="d-flex align-items-center mb-2">
			<i class="fa fa-user-circle mr-2" aria-hidden="true"></i>
			<p class="mb-0"><i>Penyelenggara: {{ organizer }}</i></p>
		</div>
		<div class="d-flex align-items-center">
			<i class="fa fa-users mr-2" aria-hidden="true"></i>
			<p class="mb-0">Kapasitas: <strong>{{ capacity }}</strong></p>
		</div>
	</div>
</div>
<div class="mt-5">
	<h5 class="mb-5">Deskripsi Kegiatan</h5>
	<p class="text-justify">{{ description }}</p>
</div>

<script>
	document.getElementById("register").addEventListener("click", function (event) {
		event.preventDefault();
		frappe.call({
			method: "event_management_system.event_management_system.doctype.transactions.api.create_transaction_for_user",
			args: {
				event: "{{ name }}",
				total_payment: "{{ total_payment }}",
				event_name: "{{ event_name }}",
			},
			callback: function (response) {
				if (response.error) {
					frappe.msgprint(response.error);
				} else {
					frappe.msgprint(response.message);
				}
			},
		});
	});
</script>
{% endblock %}
