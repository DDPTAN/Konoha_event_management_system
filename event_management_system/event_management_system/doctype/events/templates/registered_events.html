<!-- <div>
	<a href="/{{ doc.route |e }}">{{ (doc.title or doc.name) |e }}</a>
</div> -->

<div class="mb-5">
	<div class="row mb-5">
		<div class="col-2">
			<img
				src="{{doc.event_poster}}"
				class="img-fluid rounded-start"
				alt="{{doc.event_poster}}"
			/>
		</div>
		<div class="col-8">
			<h5>{{event_name}}</h5>
			<p>Penyelenggara : {{organizer}}</p>

			<div class="mb-3">
				{%- if category == 'Gratis' -%}
				<span class="badge badge-pill badge-success px-2 py-1">Gratis</span>
				{%- elif category == 'Berbayar' -%}
				<span class="badge badge-pill badge-info px-2 py-1">Rp. {{price}}</span>
				{%- endif -%}
			</div>

			<div class="d-flex">
				<p>
					<small class="text-body-secondary mr-5"
						><b>Tanggal Pelaksanaan</b> : {{date}}</small
					>
				</p>
				<p>
					<small class="text-body-secondary ml-5"
						><b>Kuota Peserta</b> : {{capacity}}</small
					>
				</p>
			</div>
		</div>
		<div class="col-2 d-flex justify-content-between align-items-center">
			{%- if category == 'Gratis' -%}
			<a name="" id="register-free" class="btn btn-primary px-5 py-2" href="#" data-event="{{name}}" data-total-payment="{{total_payment}}" data-event-name="{{event_name}}" role="button">Daftar</a>
			{%- elif category == 'Berbayar' -%}
			<a name="" id="register-paid" class="btn btn-primary px-5 py-2" href="#" role="button">Daftar</a>
			{%- endif -%}
			<a
				name=""
				id=""
				class="btn btn-outline-primary border border-primary px-5 py-2"
				href="{{ doc.route }}"
				role="button"
				>Detail</a
			>
		</div>
	</div>
	<hr class="mb-5" />
</div>

<script>
	document.getElementById('register-free').addEventListener('click', function(event) {
		event.preventDefault();
		frappe.call({
			method: 'event_management_system.event_management_system.doctype.transactions.api.create_transaction_for_user',
			args: {
				event: '{{ name }}',
				total_payment: '{{ total_payment }}',
				event_name: '{{ event_name }}',
			},
			callback: function(response) {
				if(response.ValidationError) {
					frappe.msgprint(response.ValidationError);
				}else {
					frappe.msgprint(response);
				}
			}
		});
	});
</script>

<!-- this is a sample default list template -->
